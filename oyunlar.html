<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Oyunlar</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 20px;
    background: linear-gradient(135deg,#0f172a,#111827);
    color:#e6eef6;
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap: 24px;
  }

  .game-card {
    flex: 1 1 45%;
    min-width: 300px;
    background: rgba(17,24,39,0.85);
    border-radius:14px;
    padding:16px;
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.04);
    overflow:visible;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 600px;
    position: relative;
  }

  .game-card h2{ text-align:center; color:#34d399; margin:6px 0 12px; }

  /* Ninja Fruit */
  #gameCanvas{ border:3px solid #10b981; background:#0b1220; box-shadow:0 0 12px #0f766e; flex-grow:1; }
  #scoreNF { margin-top:8px; font-weight:600; color:#f1c40f; }

  #messageNF {
    position:absolute;
    top:0; left:0; width:100%; height:100%;
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    background: rgba(2,6,23,0.85);
    border-radius:10px;
    cursor:pointer;
    z-index:20;
  }
  #messageNF h1{ color:#34d399; margin-bottom:6px; font-size:1.5rem; text-align:center; }
  #messageNF p{ color:#c7f9de; font-size:.9rem; text-align:center; }

  #blade {
    position:absolute;
    width:20px; height:20px;
    background:transparent; border-radius:50%;
    pointer-events:none;
    box-shadow:0 0 10px 5px rgba(255,255,255,0.5);
    z-index:5;
  }

  /* Matematik Oyunu */
  #startScreenMath, #endScreenMath {
    position:absolute; inset:0;
    background: rgba(0,0,0,0.85);
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    border-radius:10px;
    cursor:pointer;
    z-index:20;
  }
  #startScreenMath h1, #endScreenMath h1 { font-size:1.6rem; color:#34d399; margin-bottom:6px; text-align:center; }
  #startScreenMath p, #endScreenMath p { font-size:.9rem; color:#c7f9de; text-align:center; margin-bottom:8px; }
  .start-btnMath {
    background:#2ecc71; color:#fff; border:none; padding:8px 16px; border-radius:8px; cursor:pointer;
  }
  .start-btnMath:hover{ background:#27ae60; }

  #question-box { font-size:1.3rem; font-weight:bold; margin:8px 0; color:#a2e2ff; text-shadow: 1px 1px 3px #000; text-align:center; }
  .options-grid { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:8px; }
  .option-btn { background:#5b687c; color:#fff; border:none; padding:8px; border-radius:6px; cursor:pointer; }
  .option-btn:hover{ background:#6d7b8d; transform: scale(1.05); }
  #scoreMath { margin-top:8px; font-weight:bold; color:#fce700; }
  #timer { font-size:1.2rem; color:#ff6b6b; margin-top:4px; text-align:center; }

  @media (max-width:860px){
    .game-card{ flex:1 1 100%; }
  }
</style>
</head>
<body>

<!-- Ninja Fruit Kart -->
<div class="game-card">
  <h2>üçâ Meyve Kesme</h2>
  <canvas id="gameCanvas"></canvas>
  <div id="scoreNF">Skor: 0</div>
  <div id="messageNF">
    <h1>Meyve Kesme Oyunu</h1>
    <p>Oyunu ba≈ülatmak i√ßin tƒ±klayƒ±n</p>
  </div>
  <div id="blade"></div>
</div>

<!-- Matematik Oyunu Kart -->
<div class="game-card">
  <h2>üßÆ Matematik Yarƒ±≈üƒ±</h2>
  <div id="startScreenMath">
    <h1>Matematik Yarƒ±≈üƒ±</h1>
    <p>3 saniyede sorularƒ± cevapla.<br>Ba≈ülamak i√ßin tƒ±kla!</p>
    <button class="start-btnMath" id="startBtnMath">Ba≈ülat</button>
  </div>
  <div id="gameContainerMath">
    <div id="timer"></div>
    <div id="question-box"></div>
    <div class="options-grid" id="options-box"></div>
    <div id="scoreMath">Skor: 0</div>
  </div>
  <div id="endScreenMath">
    <h1>Oyun Bitti!</h1>
    <p>Toplam Puanƒ±nƒ±z: <span id="final-scoreMath">0</span></p>
    <button class="start-btnMath" id="restartBtnMath">Yeniden Ba≈ülat</button>
  </div>
</div>

<script>
/* ====== Ninja Fruit ====== */
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreDisplayNF = document.getElementById('scoreNF');
const messageNF = document.getElementById('messageNF');
const blade = document.getElementById('blade');

canvas.width = 400;
canvas.height = 400;

let fruits = [], bombs = [], scoreNF = 0, gameRunningNF = false;
let mouse = {x:0,y:0}, lastMouse={x:0,y:0}, isCutting=false, spawnIntervalNF;
const fruitSymbols=['üçé','üçå','üçí','üçá','üçâ','üçì'], bombSymbol='üí£';
const initialVelY=-15, initialVelX=1.5;

class GameObject {
  constructor(x,y,symbol,type='fruit'){
    this.x=x; this.y=y; this.symbol=symbol; this.type=type;
    this.size=50; this.velX=(Math.random()-0.5)*initialVelX;
    this.velY=initialVelY; this.gravity=0.5;
    this.rotation=0; this.rotationSpeed=Math.random()*0.1-0.05;
  }
  update(){ this.velY+=this.gravity; this.x+=this.velX; this.y+=this.velY; this.rotation+=this.rotationSpeed; }
  draw(){ ctx.save(); ctx.translate(this.x,this.y); ctx.rotate(this.rotation); ctx.font=`${this.size}px Arial`; ctx.textAlign='center'; ctx.textBaseline='middle'; ctx.fillText(this.symbol,0,0); ctx.restore(); }
}

function startGameNF(){
  scoreNF=0; scoreDisplayNF.textContent=scoreNF; fruits=[]; bombs=[]; gameRunningNF=true;
  messageNF.style.display='none'; spawnIntervalNF=setInterval(spawnObjectNF,1000); gameLoopNF();
}
function gameOverNF(){ gameRunningNF=false; clearInterval(spawnIntervalNF); messageNF.style.display='flex'; messageNF.innerHTML=`<h1>Oyun Bitti!</h1><p>Skorunuz: ${scoreNF}</p><p>Tekrar oynamak i√ßin tƒ±klayƒ±n</p>`; }
function gameLoopNF(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(isCutting) { drawLineNF(); checkCollisionNF(); }
  if(gameRunningNF){
    fruits.forEach(f=>{ f.update(); f.draw(); });
    bombs.forEach(b=>{ b.update(); b.draw(); });
    fruits=fruits.filter(f=>f.y<canvas.height+50);
    bombs=bombs.filter(b=>b.y<canvas.height+50);
    requestAnimationFrame(gameLoopNF);
  }
}
function spawnObjectNF(){
  const type = Math.random()<0.8?'fruit':'bomb';
  const startX = Math.random()*(canvas.width-100)+50;
  if(type==='fruit'){ const symbol = fruitSymbols.sort(()=>0.5-Math.random())[0]; fruits.push(new GameObject(startX,canvas.height+50,symbol,'fruit')); }
  else bombs.push(new GameObject(startX,canvas.height+50,bombSymbol,'bomb'));
}
function drawLineNF(){ ctx.beginPath(); ctx.moveTo(lastMouse.x,lastMouse.y); ctx.lineTo(mouse.x,mouse.y); ctx.strokeStyle='#fff'; ctx.lineWidth=4; ctx.shadowBlur=10; ctx.shadowColor='#fff'; ctx.stroke(); ctx.closePath(); }
document.addEventListener('mousemove',e=>{ lastMouse.x=mouse.x; lastMouse.y=mouse.y; mouse.x=e.clientX; mouse.y=e.clientY; blade.style.left=mouse.x+'px'; blade.style.top=mouse.y+'px'; });
document.addEventListener('mousedown',e=>{ if(!gameRunningNF){ startGameNF(); return; } isCutting=true; lastMouse.x=e.clientX; lastMouse.y=e.clientY; });
document.addEventListener('mouseup',()=>{ isCutting=false; });
function checkCollisionNF(){
  const line={x1:lastMouse.x,y1:lastMouse.y,x2:mouse.x,y2:mouse.y};
  fruits.forEach((fruit,index)=>{ const c={x:fruit.x,y:fruit.y,radius:fruit.size/2}; if(isLineCircleIntersect(line,c)){ scoreNF+=10; scoreDisplayNF.textContent=scoreNF; fruits.splice(index,1); }});
  bombs.forEach((bomb,index)=>{ const c={x:bomb.x,y:bomb.y,radius:bomb.size/2}; if(isLineCircleIntersect(line,c)){ gameOverNF(); bombs.splice(index,1); }});
  lastMouse.x=mouse.x; lastMouse.y=mouse.y;
}
function isLineCircleIntersect(line,circle){
  const dx=line.x2-line.x1; const dy=line.y2-line.y1;
  const a=dx*dx+dy*dy; const b=2*(dx*(line.x1-circle.x)+dy*(line.y1-circle.y));
  const cc=(line.x1-circle.x)*(line.x1-circle.x)+(line.y1-circle.y)*(line.y1-circle.y)-circle.radius*circle.radius;
  const disc=b*b-4*a*cc; if(disc<0) return false;
  const t1=(-b+Math.sqrt(disc))/(2*a), t2=(-b-Math.sqrt(disc))/(2*a);
  return (t1>=0&&t1<=1)||(t2>=0&&t2<=1);
}
messageNF.addEventListener('click',()=>{ if(!gameRunningNF) startGameNF(); });

/* ====== Matematik Oyunu ====== */
const startScreenMath = document.getElementById('startScreenMath');
const gameContainerMath = document.getElementById('gameContainerMath');
const endScreenMath = document.getElementById('endScreenMath');
const questionBox = document.getElementById('question-box');
const optionsBox = document.getElementById('options-box');
const scoreValue = document.getElementById('scoreMath');
const timerDisplay = document.getElementById('timer');
const finalScoreDisplay = document.getElementById('final-scoreMath');
const startBtnMath = document.getElementById('startBtnMath');
const restartBtnMath = document.getElementById('restartBtnMath');

let scoreMath = 0, correctAnswerMath, timerMath, timeLeftMath=3;

function getRandomInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

function generateQuestionMath(){
  optionsBox.innerHTML='';
  let num1=getRandomInt(1,20), num2=getRandomInt(1,20);
  const operator=Math.random()<0.5?'+':'-';
  if(operator==='-'){ if(num1<num2)[num1,num2]=[num2,num1]; correctAnswerMath=num1-num2; questionBox.textContent=`${num1} - ${num2}`; }
  else{ correctAnswerMath=num1+num2; questionBox.textContent=`${num1} + ${num2}`; }

  const options=new Set(); options.add(correctAnswerMath);
  while(options.size<4){ let w=getRandomInt(correctAnswerMath-10,correctAnswerMath+10); if(w!==correctAnswerMath&&w>=0) options.add(w); }
  Array.from(options).sort(()=>Math.random()-0.5).forEach(option=>{
    const btn=document.createElement('button'); btn.className='option-btn'; btn.textContent=option;
    btn.addEventListener('click',()=>checkAnswerMath(option)); optionsBox.appendChild(btn);
  });
  startTimerMath();
}
function checkAnswerMath(selected){ stopTimerMath(); if(parseInt(selected)===correctAnswerMath){ scoreMath++; scoreValue.textContent=scoreMath; generateQuestionMath(); } else endGameMath(); }
function endGameMath(){ stopTimerMath(); gameContainerMath.style.display='none'; endScreenMath.style.display='flex'; finalScoreDisplay.textContent=scoreMath; }
function startTimerMath(){ timeLeftMath=3; timerDisplay.textContent=timeLeftMath; timerMath=setInterval(()=>{ timeLeftMath--; timerDisplay.textContent=timeLeftMath; if(timeLeftMath<=0) endGameMath(); },1000);}
function stopTimerMath(){ clearInterval(timerMath); }
function startGameMath(){ scoreMath=0; scoreValue.textContent=scoreMath; startScreenMath.style.display='none'; endScreenMath.style.display='none'; gameContainerMath.style.display='block'; generateQuestionMath(); }

startBtnMath.addEventListener('click',startGameMath);
restartBtnMath.addEventListener('click',startGameMath);

/* ƒ∞lk durum */
gameContainerMath.style.display='none'; endScreenMath.style.display='none'; startScreenMath.style.display='flex';
</script>

</body>
</html>
