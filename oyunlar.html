<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Oyunlar (DÃ¼zeltilmiÅŸ)</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 20px;
    background: linear-gradient(135deg,#0f172a,#111827);
    color:#e6eef6;
    display:flex;
    justify-content:center;
  }
  .container {
    width:100%;
    max-width:1100px;
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:24px;
  }
  .game-card {
    position:relative;
    background: rgba(17,24,39,0.85);
    border-radius:14px;
    padding:16px;
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.04);
    overflow:visible;
  }
  .game-card h2{ text-align:center; color:#34d399; margin:6px 0 12px; }
  /* Snake */
  #snakeCanvas{ display:block; margin:0 auto; border:3px solid #10b981; background:#0b1220; box-shadow:0 0 12px #0f766e; }
  .score { text-align:center; color:#86efac; margin-top:8px; font-weight:600; }

  /* Overlays (baÅŸlangÄ±Ã§ ekranlarÄ±) */
  .start-overlay {
    position:absolute;
    inset:12px; /* overlay, kart iÃ§ kenarlarÄ±na gÃ¶re */
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    background: rgba(2,6,23,0.7);
    border-radius:10px;
    z-index:40;
    cursor:pointer;
    transition: opacity .18s ease;
  }
  .start-overlay h1{ margin:0; color:#34d399; font-size:1.8rem; }
  .start-overlay p{ margin:6px 0 0; color:#c7f9de; }

  /* Memory board */
  #memoryBoard { display:grid; grid-template-columns: repeat(4, 70px); gap:10px; justify-content:center; }
  .card {
    width:70px;height:70px;border-radius:10px;background:#263043;display:flex;align-items:center;justify-content:center;font-size:1.6rem;cursor:pointer;
    user-select:none; transition:transform .35s;
  }
  .card.flipped{ transform: rotateY(180deg); }
  .card.matched{ background:#10b981; cursor:default; }

  /* Music control */
  #musicControl {
    position:fixed; right:18px; top:18px; z-index:200;
    background:#071224;color:#95f7c9;border:1px solid rgba(255,255,255,0.06); padding:8px 10px;border-radius:8px; cursor:pointer;
  }
  @media (max-width:860px){ .container{ grid-template-columns:1fr; } }
</style>
</head>
<body>

<button id="musicControl">ğŸ”Š</button>
<audio id="bgMusic" loop>
  <source src="https://www.bensound.com/bensound-music/bensound-funkyelement.mp3" type="audio/mpeg">
</audio>

<div class="container">

  <!-- Snake Card -->
  <div class="game-card" id="snakeCard">
    <h2>ğŸ YÄ±lan Oyunu</h2>
    <canvas id="snakeCanvas" width="400" height="400"></canvas>
    <div class="score">Skor: <span id="snakeScore">0</span></div>

    <div id="snakeStartScreen" class="start-overlay">
      <h1>YÄ±lan Oyunu</h1>
      <p>TÄ±klayÄ±n veya 'W A S D' ile baÅŸlatÄ±n</p>
    </div>
  </div>

  <!-- Memory Card -->
  <div class="game-card" id="memoryCard">
    <h2>ğŸ§  HatÄ±rlama Oyunu</h2>
    <div id="memoryBoard"></div>
    <div id="memoryMessage" style="text-align:center;margin-top:10px;color:#d1f7e0"></div>

    <div id="memoryStartScreen" class="start-overlay">
      <h1>HatÄ±rlama Oyunu</h1>
      <p>TÄ±klayÄ±n ve kartlarla oynayÄ±n</p>
    </div>
  </div>

</div>

<script>
/* ---------- YardÄ±mcÄ±: gÃ¶rÃ¼nÃ¼r mÃ¼? ---------- */
function isVisible(el){
  if(!el) return false;
  const cs = window.getComputedStyle(el);
  return cs.display !== 'none' && cs.visibility !== 'hidden' && parseFloat(cs.opacity) > 0;
}

/* ---------- MÃ¼zik KontrolÃ¼ ---------- */
const bgMusic = document.getElementById('bgMusic');
const musicControl = document.getElementById('musicControl');
let musicPlaying = false;
function tryPlayMusic(){
  bgMusic.play().then(()=>{ musicPlaying = true; musicControl.textContent = 'ğŸ”Š'; })
    .catch(()=>{ /* autoplay engellenirse kullanÄ±cÄ± dÃ¼ÄŸmesiyle aÃ§abilir */ musicPlaying=false; musicControl.textContent='ğŸ”‡'; });
}
tryPlayMusic();
musicControl.addEventListener('click', ()=> {
  if(musicPlaying){ bgMusic.pause(); musicControl.textContent='ğŸ”‡'; musicPlaying=false; }
  else { bgMusic.play(); musicControl.textContent='ğŸ”Š'; musicPlaying=true; }
});

/* ================= YILAN OYUNU ================= */
const snakeCanvas = document.getElementById('snakeCanvas');
const ctx = snakeCanvas.getContext('2d');
const snakeStartScreen = document.getElementById('snakeStartScreen');
const snakeScoreSpan = document.getElementById('snakeScore');

const grid = 20;
let snakeCount = 0;
let snakeSpeed = 8;
let snakeRunning = false;
let snakeObj = null;
let apple = null;

function rand(min,max){ return Math.floor(Math.random()*(max-min))+min; }

function resetSnakeGame(){
  snakeObj = { x:180, y:180, dx:grid, dy:0, cells:[], maxCells:4 };
  apple = { x: rand(0,20)*grid, y: rand(0,20)*grid };
  snakeScoreSpan.textContent = '0';
  snakeRunning = true;
}

function snakeLoop(){
  requestAnimationFrame(snakeLoop);
  if(!snakeRunning) return;
  if(++snakeCount < (60/snakeSpeed)) return;
  snakeCount = 0;
  ctx.clearRect(0,0,snakeCanvas.width,snakeCanvas.height);

  snakeObj.x += snakeObj.dx; snakeObj.y += snakeObj.dy;
  if(snakeObj.x < 0) snakeObj.x = snakeCanvas.width - grid;
  else if(snakeObj.x >= snakeCanvas.width) snakeObj.x = 0;
  if(snakeObj.y < 0) snakeObj.y = snakeCanvas.height - grid;
  else if(snakeObj.y >= snakeCanvas.height) snakeObj.y = 0;

  snakeObj.cells.unshift({x:snakeObj.x, y:snakeObj.y});
  if(snakeObj.cells.length > snakeObj.maxCells) snakeObj.cells.pop();

  ctx.fillStyle = '#ff7b72';
  ctx.fillRect(apple.x, apple.y, grid-1, grid-1);
  ctx.fillStyle = '#2ea043';

  snakeObj.cells.forEach(function(cell, index){
    ctx.fillRect(cell.x, cell.y, grid-1, grid-1);

    if(cell.x === apple.x && cell.y === apple.y){
      snakeObj.maxCells++;
      const sc = parseInt(snakeScoreSpan.textContent || '0') + 10;
      snakeScoreSpan.textContent = sc;
      apple.x = rand(0,20)*grid; apple.y = rand(0,20)*grid;
    }

    for(let i = index + 1; i < snakeObj.cells.length; i++){
      if(cell.x === snakeObj.cells[i].x && cell.y === snakeObj.cells[i].y){
        // oyun bitti
        snakeRunning = false;
        // overlay'Ä± gÃ¶ster
        snakeStartScreen.style.display = 'flex';
      }
    }
  });
}

/* Klavye: sadece yÄ±lan baÅŸlangÄ±Ã§ ekranÄ± gÃ¶rÃ¼nÃ¼r ve memory ekranÄ± kapalÄ±yken klavye ile baÅŸlatmaya izin ver */
const memoryStartScreen = document.getElementById('memoryStartScreen');

document.addEventListener('keydown', function(e){
  // EÄŸer yÄ±lan henÃ¼z Ã§alÄ±ÅŸmÄ±yorsa ve yÄ±lan baÅŸlangÄ±Ã§ ekranÄ± gÃ¶rÃ¼nÃ¼r ve hafÄ±za ekranÄ± gÃ¶rÃ¼nmÃ¼yorsa -> baÅŸlat
  if(!snakeRunning && isVisible(snakeStartScreen) && !isVisible(memoryStartScreen)){
    snakeStartScreen.style.display = 'none';
    resetSnakeGame();
    return;
  }
  // hareket tuÅŸlarÄ±nÄ± iÅŸleme: sadece yÄ±lan Ã§alÄ±ÅŸÄ±yorsa
  if(!snakeRunning) return;

  if(e.key === 'a' || e.key === 'ArrowLeft'){ if(snakeObj.dx === 0){ snakeObj.dx = -grid; snakeObj.dy = 0; } }
  else if(e.key === 'd' || e.key === 'ArrowRight'){ if(snakeObj.dx === 0){ snakeObj.dx = grid; snakeObj.dy = 0; } }
  else if(e.key === 'w' || e.key === 'ArrowUp'){ if(snakeObj.dy === 0){ snakeObj.dy = -grid; snakeObj.dx = 0; } }
  else if(e.key === 's' || e.key === 'ArrowDown'){ if(snakeObj.dy === 0){ snakeObj.dy = grid; snakeObj.dx = 0; } }
});

snakeStartScreen.addEventListener('click', function(){
  // tÄ±kla ile baÅŸlat: overlay aÃ§Ä±k olduÄŸu sÃ¼rece baÅŸlat
  if(isVisible(snakeStartScreen)){
    snakeStartScreen.style.display = 'none';
    resetSnakeGame();
  }
});

requestAnimationFrame(snakeLoop);

/* ================= HAFIZA (MEMORY) OYUNU ================= */
const allSymbols = ['ğŸ¦','ğŸ¦Š','ğŸ»','ğŸ¼','ğŸ¨','ğŸ¯','ğŸ¸','ğŸ¢'];
let symbolsArr = [];
let firstCard=null, secondCard=null, lockBoard=false, pairsFound=0;

const memoryBoard = document.getElementById('memoryBoard');
const memoryMessage = document.getElementById('memoryMessage');

function shuffle(a){ return a.sort(()=>Math.random()-0.5); }

function createMemoryBoard(){
  pairsFound = 0; memoryBoard.innerHTML=''; memoryMessage.textContent='';
  symbolsArr = shuffle([...allSymbols, ...allSymbols]);
  symbolsArr.forEach(sym => {
    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.symbol = sym;
    card.textContent = 'â“';
    memoryBoard.appendChild(card);

    card.addEventListener('click', function(){ 
      if(lockBoard || card.classList.contains('matched') || card === firstCard) return;
      // aÃ§
      card.textContent = sym;
      card.classList.add('flipped');

      if(!firstCard){ firstCard = card; return; }
      secondCard = card;
      checkMemoryMatch();
    });
  });
}

function checkMemoryMatch(){
  if(firstCard.dataset.symbol === secondCard.dataset.symbol){
    firstCard.classList.add('matched');
    secondCard.classList.add('matched');
    firstCard = null; secondCard = null;
    pairsFound++;
    if(pairsFound === allSymbols.length){
      memoryMessage.textContent = "ğŸ‰ Tebrikler! TÃ¼m kartlarÄ± eÅŸleÅŸtirdiniz.";
      // oyun bittiÄŸinde overlay'i tekrar gÃ¶ster (isteÄŸe baÄŸlÄ±)
      setTimeout(()=> {
        document.getElementById('memoryStartScreen').style.display = 'flex';
      }, 1200);
    }
  } else {
    lockBoard = true;
    setTimeout(()=> {
      firstCard.textContent = 'â“'; secondCard.textContent = 'â“';
      firstCard.classList.remove('flipped'); secondCard.classList.remove('flipped');
      firstCard = null; secondCard = null; lockBoard = false;
    }, 900);
  }
}

/* memory start click */
document.getElementById('memoryStartScreen').addEventListener('click', function(){
  if(isVisible(this)){
    this.style.display = 'none';
    createMemoryBoard();
  }
});

/* Ä°lk durum: overlay'ler gÃ¶rÃ¼nsÃ¼n (kullanÄ±cÄ±nÄ±n tÄ±klamasÄ±yla baÅŸlasÄ±n) */
snakeStartScreen.style.display = 'flex';
memoryStartScreen.style.display = 'flex';
</script>
</body>
</html>
