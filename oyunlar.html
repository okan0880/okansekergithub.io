<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Oyunlar ve Müzik</title>
<style>
body {
  font-family: 'Poppins', sans-serif;
  margin:0; padding:0;
  background:#0d1117;
  color:#c9d1d9;
}
#musicControl {
  position: fixed;
  top: 15px;
  right: 15px;
  font-size: 2em;
  cursor: pointer;
  z-index: 50;
}
section {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 50px;
  padding: 20px;
}
canvas {
  border: 3px solid #238636;
  background-color: #161b22;
  box-shadow: 0 0 20px #238636;
}
.game-container {
  padding:20px;
  background: rgba(30,30,35,0.85);
  border-radius:20px;
  border:2px solid #5a5a5a;
  position: relative; /* BURASI ÖNEMLİ */
}
h2 {text-align:center; color:#10b981;}
.game-board {
  display:grid;
  grid-template-columns: repeat(4, 80px);
  gap:10px;
  position: relative; /* kartların grid içinde düzgün yerleşmesi için */
}
.card { 
  width:80px; height:80px; border-radius:12px; 
  display:flex; justify-content:center; align-items:center; font-size:30px; cursor:pointer; 
  perspective:1000px; position: relative; /* absolute kaldırıldı */
}
.card-front, .card-back { 
  position: absolute; width:100%; height:100%; backface-visibility:hidden; display:flex; justify-content:center; align-items:center; border-radius:12px; 
}
.card-front { background:#4a4a4f; border:3px solid #6a6a6f; }
.card-back { background:linear-gradient(45deg,#10b981,#0c7a52); transform:rotateY(180deg); }
.card.flipped { transform:rotateY(180deg); transition: transform 0.6s; }

#startScreenSnake, #startScreenMemory {
  position:absolute; top:0; left:0; width:100%; height:100%; 
  background: rgba(0,0,0,0.75); display:flex; flex-direction:column; justify-content:center; align-items:center; 
  cursor:pointer; z-index:10; color:#c9d1d9; text-align:center;
}
#startScreenSnake.hidden, #startScreenMemory.hidden { display:none; }
.score-display { position:absolute; top:15px; left:15px; font-size:1.5em; color:#238636; }
.message { margin-top:10px; text-align:center; font-size:1.2em; color:#e0e0e0; }
</style>
</head>
<body>

<div id="musicControl">🔇</div>

<section>
  <!-- Yılan Oyunu -->
  <div style="position:relative;">
    <canvas width="400" height="400" id="snakeGame"></canvas>
    <div id="startScreenSnake">
      <h1>Yılan Oyunu</h1>
      <p>Oyunu başlatmak için tıklayın</p>
    </div>
    <div class="score-display">Skor: <span id="snakeScore">0</span></div>
  </div>

  <!-- Hatırlama Oyunu -->
  <div class="game-container">
    <h2>Hatırlama Oyunu</h2>
    <div class="game-board" id="memoryBoard"></div>
    <div class="message" id="memoryMessage"></div>
    <div id="startScreenMemory">
      <h1>Hatırlama Oyunu</h1>
      <p>Oyunu başlatmak için tıklayın</p>
    </div>
  </div>
</section>

<audio id="bgMusic" loop src="https://www.bensound.com/bensound-music/bensound-energy.mp3"></audio>

<script>
// MÜZİK KONTROLÜ
const bgMusic = document.getElementById('bgMusic');
const musicControl = document.getElementById('musicControl');
let musicPlaying = false;
musicControl.addEventListener('click', () => {
  if(!musicPlaying){
    bgMusic.play().then(()=>{ musicPlaying=true; musicControl.textContent='🔊'; }).catch(()=>{});
  } else {
    bgMusic.pause();
    musicPlaying=false;
    musicControl.textContent='🔇';
  }
});

// -------------------- YILAN OYUNU --------------------
var canvas = document.getElementById('snakeGame');
var ctx = canvas.getContext('2d');
var startScreenSnake = document.getElementById('startScreenSnake');
var scoreDisplay = document.getElementById('snakeScore');
var gameRunningSnake = false;
var grid=20, count=0, gameSpeed=8;
var snake={}, apple={}, score=0;
function getRandomInt(min,max){ return Math.floor(Math.random()*(max-min))+min; }
function resetSnakeGame(){
  snake={x:180,y:180,dx:grid,dy:0,cells:[],maxCells:4};
  apple={x:getRandomInt(0,20)*grid, y:getRandomInt(0,20)*grid};
  score=0;
  scoreDisplay.textContent=score;
  gameRunningSnake = true;
}
function loopSnake(){
  requestAnimationFrame(loopSnake);
  if(!gameRunningSnake) return;
  if(++count < (60/gameSpeed)) return;
  count=0;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  snake.x+=snake.dx; snake.y+=snake.dy;
  if(snake.x<0) snake.x=canvas.width-grid;
  else if(snake.x>=canvas.width) snake.x=0;
  if(snake.y<0) snake.y=canvas.height-grid;
  else if(snake.y>=canvas.height) snake.y=0;
  snake.cells.unshift({x:snake.x, y:snake.y});
  if(snake.cells.length>snake.maxCells) snake.cells.pop();
  ctx.fillStyle='#ff7b72'; ctx.fillRect(apple.x,apple.y,grid-1,grid-1);
  ctx.fillStyle='#2ea043';
  snake.cells.forEach(function(cell,index){
    ctx.fillRect(cell.x,cell.y,grid-1,grid-1);
    if(cell.x===apple.x && cell.y===apple.y){
      snake.maxCells++; score+=10; scoreDisplay.textContent=score;
      apple.x=getRandomInt(0,20)*grid; apple.y=getRandomInt(0,20)*grid;
    }
    for(var i=index+1;i<snake.cells.length;i++){
      if(cell.x===snake.cells[i].x && cell.y===snake.cells[i].y){
        gameRunningSnake=false;
        startScreenSnake.style.display='flex';
      }
    }
  });
}
document.addEventListener('keydown', function(e){
  if(!gameRunningSnake){ startScreenSnake.style.display='none'; resetSnakeGame(); return; }
  if(e.key==='a' && snake.dx===0){ snake.dx=-grid; snake.dy=0; }
  else if(e.key==='w' && snake.dy===0){ snake.dy=-grid; snake.dx=0; }
  else if(e.key==='d' && snake.dx===0){ snake.dx=grid; snake.dy=0; }
  else if(e.key==='s' && snake.dy===0){ snake.dy=grid; snake.dx=0; }
});
startScreenSnake.addEventListener('click', ()=>{ startScreenSnake.style.display='none'; resetSnakeGame(); });

// -------------------- HATIRLAMA OYUNU --------------------
const allSymbols=['🦁','🦊','🐻','🐼','🐨','🐯','🐸','🐢'];
const symbols=[...allSymbols,...allSymbols];
let firstCard=null, secondCard=null, lockBoard=false, pairsFound=0;
const board=document.getElementById('memoryBoard');
const message=document.getElementById('memoryMessage');
const startScreenMemory=document.getElementById('startScreenMemory');

function shuffle(array){ return array.sort(()=>Math.random()-0.5); }
function createMemoryBoard(){
  pairsFound=0; board.innerHTML='';
  shuffle(symbols).forEach(symbol=>{
    const card=document.createElement('div');
    card.classList.add('card'); card.dataset.symbol=symbol;
    card.innerHTML=`<div class="card-front"></div><div class="card-back">${symbol}</div>`;
    board.appendChild(card);
    card.addEventListener('click', flipCard);
  });
}
function flipCard(){ if(lockBoard||this===firstCard) return; this.classList.add('flipped');
  if(!firstCard){ firstCard=this; return; }
  secondCard=this; checkForMatch();
}
function checkForMatch(){
  let isMatch=firstCard.dataset.symbol===secondCard.dataset.symbol;
  if(isMatch){ disableCards(); pairsFound++; checkWin(); } else{ unflipCards(); }
}
function disableCards(){ firstCard.removeEventListener('click',flipCard); secondCard.removeEventListener('click',flipCard); resetBoard(); }
function unflipCards(){ lockBoard=true; setTimeout(()=>{ firstCard.classList.remove('flipped'); secondCard.classList.remove('flipped'); resetBoard(); },1000); }
function resetBoard(){ [firstCard,secondCard,lockBoard]=[null,null,false]; }
function checkWin(){ if(pairsFound===symbols.length/2){ message.textContent="Tebrikler! Tüm kartları eşleştirdiniz 🎉";
  setTimeout(()=>{ startScreenMemory.classList.remove('hidden'); },3000); } }
function startMemoryGame(){ startScreenMemory.classList.add('hidden'); createMemoryBoard(); message.textContent=''; }
startScreenMemory.addEventListener('click', startMemoryGame);

// -------------------- BAŞLAT --------------------
loopSnake();
</script>

</body>
</html>
